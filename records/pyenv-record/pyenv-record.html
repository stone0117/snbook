<p>@(工作笔记)</p>

<h1>pyenv-record</h1>

<p><img alt="Alt text" src="./1593477836522.png"/></p>

<p>[TOC]</p>

<hr/>

<p>brew install pyenv</p>

<p>brew install pyenv-virtualenv</p>

<p><code>
export PATH=&quot;$HOME/.pyenv/bin:$PATH&quot;
eval &quot;$(pyenv init -)&quot;
eval &quot;$(pyenv virtualenv-init -)&quot;
</code></p>

<ul><li><code>pyenv</code>: pyenv 工具自身</li><li><code>pyenv-virtualenv</code>: pyenv 的插件可以用来管理 vierual environments</li><li><code>pyenv-update</code>: 用来更新 pyenv 的插件</li><li><code>pyenv-doctor</code>: 验证 pyenv 和依赖是否安装的插件</li><li><code>pyenv-which-ext</code>: 用来寻找相同命令的插件</li></ul>

<p>这里的 shell 配置文件（~/.bash_profile）需要按照不同 Linux 作修改，如果使用 Zsh 则需要相应的配置 <code>~/.zshrc</code></p>

<p>在使用 pyenv 之后使用 pip 安装的第三方模块会自动安装到当前使用 python 版本下，不会和系统模块产生冲突。使用 pip 安装模块之后，如果没有生效，记得使用 <code>pyenv rehash</code> 来更新 shims 路径。</p>

<p><code>
pyenv global 2.7.3  # 设置全局的 Python 版本，通过将版本号写入 ~/.pyenv/version 文件的方式。
pyenv local 2.7.3 # 设置 Python 本地版本，通过将版本号写入当前目录下的 .python-version 文件的方式。通过这种方式设置的 Python 版本优先级较 global 高。
</code></p>

<h2><a href="https://github.com/pyenv/pyenv/issues/1067">pyenv doctor breaks on OpenSSL 1.1</a></h2>

<p>On MacOS Mojave (10.14) I was able to run <code>pyenv doctor</code> with these variables exported:</p>

<p><code>
export LDFLAGS=&quot;-L/usr/local/opt/openssl/lib&quot;
export CPPFLAGS=&quot;-I/usr/local/opt/openssl/include
</code></p>

<p>openssl is installed with brew (notice the caveats)</p>

<p><code></code>`
ls -l /usr/local/opt/openssl
lrwxr-xr-x  1 kristofferb  admin  24 Dec  8 15:10 /usr/local/opt/openssl -&gt; ../Cellar/openssl/1.0.2q</p>

<p>brew info openssl
openssl: stable 1.0.2q (bottled) [keg-only]
SSL/TLS cryptography library
https://openssl.org/
/usr/local/Cellar/openssl/1.0.2q (1,795 files, 12.1MB)
  Poured from bottle on 2018-12-08 at 15:10:47
From: https://github.com/Homebrew/homebrew-core/blob/master/Formula/openssl.rb
==&gt; Caveats
A CA file has been bootstrapped using certificates from the SystemRoots
keychain. To add additional certificates (e.g. the certificates added in
the System keychain), place .pem files in
  /usr/local/etc/openssl/certs</p>

<p>and run
  /usr/local/opt/openssl/bin/c_rehash</p>

<p>openssl is keg-only, which means it was not symlinked into /usr/local,
because Apple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries.</p>

<p>If you need to have openssl first in your PATH run:
  echo &#39;export PATH=&quot;/usr/local/opt/openssl/bin:$PATH&quot;&#39; &gt;&gt; ~/.zshrc</p>

<p>For compilers to find openssl you may need to set:
  export LDFLAGS=&quot;-L/usr/local/opt/openssl/lib&quot;
  export CPPFLAGS=&quot;-I/usr/local/opt/openssl/include&quot;</p>

<p>For pkg-config to find openssl you may need to set:
  export PKG<em>CONFIG</em>PATH=&quot;/usr/local/opt/openssl/lib/pkgconfig&quot;
<code></code>`</p>

<h3>Uninstalling pyenv</h3>

<p>The simplicity of pyenv makes it easy to temporarily disable it, or uninstall from the system.</p>

<ol><li>To <strong>disable</strong> pyenv managing your Python versions, simply remove the <code>pyenv init</code> line from your shell startup configuration. This will remove pyenv shims directory from PATH, and future invocations like <code>python</code> will execute the system Python version, as before pyenv.</li></ol>

<p><code>pyenv</code> will still be accessible on the command line, but your Python apps won&#39;t be affected by version switching.</p>

<ol><li><p>To completely <strong>uninstall</strong> pyenv, perform step (1) and then remove its root directory. This will <strong>delete all Python versions</strong> that were installed under <code>$(pyenv root)/versions/</code> directory:</p><p><code>
rm -rf $(pyenv root)
</code></p><p>If you&#39;ve installed pyenv using a package manager, as a final step perform the pyenv package removal. For instance, for Homebrew:</p><p><code>
brew uninstall pyenv
</code></p></li></ol>

<hr/>

<p>https://www.jianshu.com/p/af1f8d7b6b31</p>

<p><code>bash
pyenv install --list # 列出可安装版本
pyenv install &lt;version&gt; # 安装对应版本
pyenv install -v &lt;version&gt; # 安装对应版本，若发生错误，可以显示详细的错误信息
pyenv versions # 显示当前使用的python版本
pyenv which python # 显示当前python安装路径
pyenv global &lt;version&gt; # 设置默认Python版本
pyenv local &lt;version&gt; # 当前路径创建一个.python-version, 以后进入这个目录自动切换为该版本
pyenv shell &lt;version&gt; # 当前shell的session中启用某版本，优先级高于global 及 local
</code></p>

<p><code></code>`css
pyenv virtualenv env # 从默认版本创建虚拟环境
pyenv virtualenv 3.6.4 env-3.6.4 # 创建3.6.4版本的虚拟环境
pyenv activate env-3.6.4 # 激活 env-3.6.4 这个虚拟环境
pyenv deactivate # 停用当前的虚拟环境</p>

<h1>自动激活</h1>

<h1>使用pyenv local 虚拟环境名</h1>

<h1>会把<code>虚拟环境名</code>写入当前目录的.python-version文件中</h1>

<h1>关闭自动激活 -&gt; pyenv local --unset</h1>

<h1>启动自动激活 -&gt; pyenv local env-3.6.4</h1>

<p>pyenv local env-3.6.4</p>

<p>pyenv uninstall env-3.6.4 # 删除 env-3.6.4 这个虚拟环境
<code></code>`</p>

<p><code></code>`bash</p>

<h1>查看python版本列表</h1>

<p>pyenv install --list</p>

<h1>安装3.5.0版本</h1>

<p>pyenv install -v 3.5.0</p>

<h1>卸载</h1>

<p>pyenv uninstall 3.5.0</p>

<h1>安装/卸载完成后必须rehash database</h1>

<p>pyenv rehash
<code></code>`</p>

<p>这里要提到一点是，安装过程中楼主遇到了以下错误，然后搜到解决办法如下：</p>

<p><code></code>`cpp
ERROR: The Python ssl extension was not compiled. Missing the OpenSSL lib?</p>

<p>Please consult to the Wiki page to fix the problem.
https://github.com/pyenv/pyenv/wiki/Common-build-problems</p>

<p>BUILD FAILED (OS X 10.13.1 using python-build 20160602)
CFLAGS=&quot;-I$(brew --prefix openssl)/include&quot; \
LDFLAGS=&quot;-L$(brew --prefix openssl)/lib&quot; \
pyenv install 3.4.2
<code></code>`</p>

<p><code></code>`bash</p>

<h1>设置面向 shell 的 Python 版本，通过设置当前 shell 的 PYENV_VERSION 环境变量的方式。</h1>

<h1>这个版本的优先级比 local 和 global 都要高。--unset 参数可以用于取消当前 shell 设定的版本。</h1>

<p>pyenv shell 3.5.0</p>

<h1>取消某版本切换</h1>

<p>pyenv shell --unset
<code></code>`</p>

<p><code>bash
pyenv uninstall python3env
</code></p>

<p>查看当前虚拟环境列表</p>

<p><code>csharp
pyenv virtualenvs
</code></p>

<p>删除某虚拟环境</p>

<p><code>undefined
pyenv uninstall 虚拟环境名
</code></p>

<hr/>

<h2><a href="https://www.jianshu.com/p/37576a6de65b">Python多版本管理</a></h2>

<hr/>

<p>查看包路径</p>

<p>pip show pip</p>

<hr/>

<p>virtualenvs 怎么玩?</p>
